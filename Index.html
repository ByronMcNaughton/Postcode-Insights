<!DOCTYPE html>
<html lang="en">

<head>
    <link rel="stylesheet" href="style.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>


    <script>
    //Wait for main body (document) to load
        $(document).ready(function(){
            $('.postcodeEntry').on('submit', function(e){
                e.preventDefault();
                $('#loading').css('visibility', 'visible');
                var postcode = $("#pcode").val()
                $.get("https://ggvfog559k.execute-api.us-east-1.amazonaws.com/GETDATA?"+postcode, function(data, status){

                    $('#Local_Postcode_container').empty();
                    $('#category_data').empty();
                    $('#location_data').empty();
                    $('#outcome_status_results').empty();



                    postcode = data.postcode
                    pc = data.parliamentary_constituency
                    nearest_postcodes = data.nearest_postcodes
                    planning_data = data.planning_data
                    total_crime = data.total_crime
                    crime_date = data.crime_date
                    category = data.category
                    street_name = data.street_name
                    outcome_status = data.outcome_status

                    $.each(nearest_postcodes, function( index, value ) {
                        var nearest_pc_append = $("<p></p>").text(index);
                        nearest_pc_append.css('display', 'inline-block');
                        nearest_pc_append.css('width', '100%');
                        $("#Local_Postcode_container").append(nearest_pc_append);
                    });

                    $.each(category, function( index, value ) {
                        var category_append = $("<p></p>").text(index+" : "+value);
                        category_append.css('display', 'inline-block');
                        category_append.css('width', '100%');
                        $("#category_data").append(category_append);
                    });

                    $.each(street_name, function( index, value ) {
                        var street_name_append = $("<p></p>").text(index+" : "+value);
                        street_name_append.css('display', 'inline-block');
                        street_name_append.css('width', '100%');
                        $("#location_data").append(street_name_append);
                    });

                    $.each(outcome_status, function( index, value ) {
                        var outcome_status_stat_append = $("<p></p>").text(index+" : "+value);
                        outcome_status_stat_append.css('display', 'inline-block');
                        outcome_status_stat_append.css('width', '100%');
                        $("#outcome_status_results").append(outcome_status_stat_append);
                    });

                    $('#postcode_display').text(postcode)
                    $('#pc_display').text(pc)
                    $('#planning_data_display').text(planning_data)

                    $( ".postcodeEntry" ).css("width", "200")
                    $( ".postcodeEntry" ).css("height", "120")
                    $( ".postcodeEntry" ).css("top", "38px")
                    $( ".postcodeEntry" ).css("left", "290px")



                    $( "#wrapper-loading" ).remove();

                    $('#Wrapper').css('visibility', 'visible');


                });
            });
        });
    </script>
</head>

<body>

<div class="header">
    <h1>Postcode Info</h1>
</div>

<div id="postcode_lookup_form_div">
    <form class="postcodeEntry">

        <label class="text" for="pcode">Postcode:</label><br><br>
        <input class="inputField" id="pcode" type="text" name="postcode" placeholder="Eg. CO12ZQ"><br>
        <input class="subButton" type="submit" value="Search">
    </form>
</div>

<div id="wrapper-loading">
    <div id="loading">
        <p>Loading</p>
    </div>
</div>

<div id="Wrapper">

    <div id="Section_1">

        <div id="Section_1_left">
            <h2 id="postcode_text">Postcode</h2>
            <span id="postcode_display"></span>
            <h2 id="pc_text">Parliamentary Constituency</h2>
            <span id="pc_display"></span>
        </div>
        <div id="Section_1_right">
            <h2>Local Postcodes</h2>
            <div id="Local_Postcode_container">
            </div>
        </div>

    </div>

    <div id="Section_2">
        <div id="s2h"><h2>Crime Statistics</h2></div>

        <div id="Section_2_left">
            <h2>Category</h2>
            <div id="category_data">

            </div>
        </div>
        <div id="Section_2_right">
            <h2>Location</h2>
            <div id="location_data">

            </div>
        </div>
    </div>

    <div id="Section_3">
        <h2>Outcome Status</h2>
        <div id="outcome_status_results">

        </div>
    </div>

</div>



</body>
</html>